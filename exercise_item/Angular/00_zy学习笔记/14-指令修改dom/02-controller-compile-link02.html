<!DOCTYPE html>
<html lang="en" ng-app="myApp">
<head>
    <meta charset="UTF-8">
    <title>controller-compil-link02</title>
</head>
<body ng-controller="myCtrl">
    <div parent>
        <div child></div>
    </div>
</body>
<script src="../../../dist/angular/angular.js"></script>
<script>
    var ag = angular.module("myApp",[]);
    ag.controller("myCtrl",["$rootScope",function($rootScope){

    }]);
    ag.directive("parent",function(){
        return{
            restrict:"AE",
            controller:function($scope, $element, $attrs, $transclude) {
                console.log("parent controller");
            },
            compile:function(tElement, tAttrs, transclude){
                console.log("parent compile");
                return{
                    pre:function(scope, iElement, iAttrs, controller){
                        console.log("parent pre")
                    },
                    post:function(scope, iElement, iAttrs, controller){
                        console.log("parent post")
                    }
                }
            }
        }
    });
    ag.directive("child",function(){
        return{
            restrict:"AE",
            controller:function($scope, $element, $attrs, $transclude) {
                console.log("child controller");
            },
            compile:function(tElement, tAttrs, transclude){
                console.log("child compile");
                return{
                    pre:function(scope, iElement, iAttrs, controller){
                        console.log("child pre")
                    },
                    post:function(scope, iElement, iAttrs, controller){
                        console.log("child post")
                    }
                }
            }
        }
    });

</script>
</html>